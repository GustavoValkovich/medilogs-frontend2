{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../../../core/services/paciente.service\";\nimport * as i4 from \"@angular/material/snack-bar\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/card\";\nexport let HistoriaFormComponent = /*#__PURE__*/(() => {\n  class HistoriaFormComponent {\n    constructor(route, fb, pacienteService, snack, router) {\n      this.route = route;\n      this.fb = fb;\n      this.pacienteService = pacienteService;\n      this.snack = snack;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.pacienteId = this.route.snapshot.paramMap.get('id') || '';\n      this.form = this.fb.group({\n        motivo: ['', Validators.required],\n        diagnostico: [''],\n        tratamiento: [''],\n        observaciones: [''],\n        fecha: [new Date().toISOString().slice(0, 10)]\n      });\n    }\n    submit() {\n      if (this.form.invalid) return;\n      this.pacienteService.createHistoria(this.pacienteId, this.form.value).subscribe(() => {\n        this.snack.open('Historia guardada', 'Cerrar', {\n          duration: 2000\n        });\n        this.router.navigate(['/pacientes']);\n      }, err => {\n        this.snack.open('Error al guardar historia', 'Cerrar', {\n          duration: 3000\n        });\n      });\n    }\n    static {\n      this.ɵfac = function HistoriaFormComponent_Factory(t) {\n        return new (t || HistoriaFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.PacienteService), i0.ɵɵdirectiveInject(i4.MatSnackBar), i0.ɵɵdirectiveInject(i1.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HistoriaFormComponent,\n        selectors: [[\"app-historia-form\"]],\n        decls: 25,\n        vars: 1,\n        consts: [[3, \"ngSubmit\", \"formGroup\"], [\"appearance\", \"fill\", 1, \"full\"], [\"matInput\", \"\", \"formControlName\", \"motivo\"], [\"matInput\", \"\", \"formControlName\", \"diagnostico\"], [\"matInput\", \"\", \"formControlName\", \"tratamiento\"], [\"matInput\", \"\", \"formControlName\", \"observaciones\"], [2, \"margin-top\", \"12px\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", \"type\", \"submit\"], [\"mat-button\", \"\", \"type\", \"button\", 3, \"click\"]],\n        template: function HistoriaFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-card\")(1, \"h2\");\n            i0.ɵɵtext(2, \"Agregar Historia Cl\\u00EDnica\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 0);\n            i0.ɵɵlistener(\"ngSubmit\", function HistoriaFormComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelementStart(4, \"mat-form-field\", 1)(5, \"mat-label\");\n            i0.ɵɵtext(6, \"Motivo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"input\", 2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"mat-form-field\", 1)(9, \"mat-label\");\n            i0.ɵɵtext(10, \"Diagn\\u00F3stico\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(11, \"textarea\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"mat-form-field\", 1)(13, \"mat-label\");\n            i0.ɵɵtext(14, \"Tratamiento\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"textarea\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"mat-form-field\", 1)(17, \"mat-label\");\n            i0.ɵɵtext(18, \"Observaciones\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(19, \"textarea\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 6)(21, \"button\", 7);\n            i0.ɵɵtext(22, \"Guardar Historia\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function HistoriaFormComponent_Template_button_click_23_listener() {\n              return ctx.router.navigate([\"/pacientes\"]);\n            });\n            i0.ɵɵtext(24, \"Cancelar\");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n          }\n        },\n        dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i5.MatInput, i6.MatFormField, i6.MatLabel, i7.MatButton, i8.MatCard],\n        styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n      });\n    }\n  }\n  return HistoriaFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}